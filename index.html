<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V2474V50XP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-V2474V50XP');
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <title>HermodLabs — Home Page</title>
    <meta
      name="description"
      content="HermodLabs builds a co-timing engine that proves streams are on the same clock before you subtract, compare, threshold, or interpret. Portable cancellation + diagnostics + proof-shaped certificates."
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      referrerpolicy="no-referrer"
    />
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>

    <link rel="stylesheet" href="" id="main-css" />

    <script type="importmap">
    {
      "imports": {
        "lit": "https://esm.run/lit"
      }
    }
    </script>
    <script type="module">
      import "./bootstrap.js";
    </script>
    <style type="text/css">
/* =========================
   Apply surfaces to page + modules
   (safe defaults; won’t fight your system)
   ========================= */

body {
  background: var(--bg);
  color: var(--text-main);
}

/* If your <site-page> is your main wrapper, give it breathing room */
site-page {
  display: block;
  background: var(--bg);
}

/* Give each major homepage module a section surface.
   This assumes your custom elements render as block-level. */
site-hero,
patent-credentials,
cannabis-market-proof,
event-invite {
  display: block;

  /* Section “module” surface */
  background: var(--panel-soft);

  /* Separation without heavy borders */
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-lg);

  /* Vertical rhythm / whitespace (tune as desired) */
  padding: clamp(1.25rem, 3vw, 2rem);
  margin: clamp(0.75rem, 2vw, 1.25rem) auto;

  /* Keep it feeling “sheeted” not “boxed” */
  box-shadow: none;
}

/* Optional: make just the inner “card” areas pure white if your components contain
   nested panels. Add this class inside components if you control their templates. */
.surface-card {
  background: var(--panel);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-md);
  padding: var(--space-4);
}

/* Optional callout surface for assumptions / footnotes */
.surface-callout {
  background: var(--panel-softer);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-md);
  padding: var(--space-3) var(--space-4);
}

/* If borders start to feel too “wireframe”, keep the border only on hover/focus */
@media (hover: hover) {
  site-hero:hover,
  patent-credentials:hover,
  cannabis-market-proof:hover,
  event-invite:hover {
    box-shadow: var(--shadow-soft);
  }
}

/* Accessibility: focus ring when a module contains focused content */
site-hero:focus-within,
patent-credentials:focus-within,
cannabis-market-proof:focus-within,
event-invite:focus-within {
  outline: 2px solid rgba(15, 23, 42, 0.25);
  outline-offset: 2px;
}

/* =========================
   2) VERTICAL RHYTHM + GRID
   Drop this into your CSS (after tokens).
   ========================= */

/* A consistent page container */
.hl-container {
  width: min(1120px, calc(100% - 2 * var(--space-4)));
  margin-inline: auto;
}

/* Section wrapper = consistent vertical rhythm */
.hl-section {
  padding-block: var(--space-6); /* consistent top/bottom spacing */
}

/* Optional: alternate section tone if you want subtle cadence */
.hl-section:nth-of-type(even) {
  /* If you implemented --panel-soft in step (1), this creates a gentle cadence */
  background: transparent; /* keep page clean; wrapper can be tinted if you prefer */
}

/* Grid: single column by default, two-column at desktop */
.hl-grid {
  display: grid;
  gap: var(--space-5);
  align-items: start;
}

/* Default: one column (mobile/tablet) */
.hl-grid {
  display: grid;
  gap: var(--space-5);
  align-items: start;
  grid-template-columns: 1fr; /* default: always single */
}

/* Desktop: two columns, story left, proof right */
@media (min-width: 960px) {
  .hl-grid--two {
    grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
  }
}

/* Force single-column when you want (e.g., a simpler module) */
.hl-grid--single {
  grid-template-columns: 1fr !important;
}

/* Default (single-column): let content use full container width */
.hl-story {
  max-width: none;
}

/* Proof column: “cards/metrics live here” */
.hl-proof {
  display: grid;
  gap: var(--space-4);
}

/* If your custom elements should stretch cleanly within the layout */
.hl-story > * ,
.hl-proof > * {
  width: 100%;
}

/* Only constrain reading measure in the two-column layout */
@media (min-width: 960px) {
  .hl-grid--two .hl-story {
    max-width: 72ch;
  }
}

/* Optional: add a subtle divider between story and proof on desktop */
@media (min-width: 960px) {
  .hl-proof {
    padding-left: var(--space-5);
    border-left: 1px solid var(--border-soft);
  }
}

/* =========================
   4) CARDS WITH MEANING
   Chips + metric cards + assumptions callout
   ========================= */

.hl-chips {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  margin-top: var(--space-3);
  margin-bottom: var(--space-3);
}

.hl-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.5ch;
  padding: 0.35rem 0.6rem;
  border-radius: 999px;
  background: var(--chip);
  border: 1px solid var(--border-soft);
  color: var(--text-main);
  font-size: 0.82rem;
  font-weight: 600;
  line-height: 1;
  white-space: nowrap;
}

/* Metric grid */
.hl-metrics {
  display: grid;
  gap: var(--space-3);
  grid-template-columns: repeat(2, minmax(0, 1fr));
  margin: var(--space-3) 0 var(--space-4);
}

@media (min-width: 760px) {
  .hl-metrics {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

.hl-metric {
  background: var(--panel);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-md);
  padding: var(--space-4);
  box-shadow: none;
}

.hl-metric__label {
  color: var(--text-muted);
  font-size: 0.82rem;
  font-weight: 600;
  letter-spacing: 0.02em;
  margin-bottom: var(--space-2);
}

.hl-metric__value {
  color: var(--text-main);
  font-size: clamp(1.05rem, 1.3vw, 1.25rem);
  font-weight: 800;
  line-height: 1.1;
}

/* Assumptions footnote (lighter inset) */
.hl-footnote {
  background: var(--panel-softer, rgba(15, 23, 42, 0.03));
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-md);
  padding: var(--space-3) var(--space-4);
}

.hl-footnote__label {
  font-size: 0.78rem;
  font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--text-muted);
  margin-bottom: var(--space-2);
}

.hl-footnote__text {
  color: var(--text-muted);
  font-size: 0.95rem;
  line-height: 1.5;
  max-width: 72ch;
}

.hl-cta-row {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-3);
  margin-top: var(--space-4);
  align-items: center;
}

/* =========================
   8) D3 "MARKET WEDGE" STRIP
   Compact, emblematic, not a dashboard
   ========================= */

.hl-wedge {
  margin-top: var(--space-4);
  margin-bottom: var(--space-4);
}

.hl-wedge__label {
  font-size: 0.78rem;
  font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--text-muted);
  margin-bottom: var(--space-2);
}

.hl-wedge__viz {
  background: var(--panel);
  border: 1px solid var(--border-soft);
  border-radius: var(--radius-md);
  padding: var(--space-3);
}

/* Tooltip */
.hl-tip {
  position: fixed;
  z-index: 9999;
  pointer-events: none;
  background: var(--panel);
  border: 1px solid var(--border-soft);
  border-radius: 12px;
  box-shadow: var(--shadow-soft);
  padding: 0.6rem 0.7rem;
  max-width: 320px;
  color: var(--text-main);
  font-size: 0.9rem;
  line-height: 1.35;
}

.hl-tip__k {
  font-size: 0.72rem;
  font-weight: 800;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--text-muted);
  margin-bottom: 0.25rem;
}

.hl-tip__muted {
  color: var(--text-muted);
  font-size: 0.88rem;
}

/* =========================
   Assumptions list with Font Awesome icons
   "bullet pointy" + subtle icon presence
   ========================= */

.hl-assumptions {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: var(--space-2);
}

.hl-assumption {
  display: grid;
  grid-template-columns: 1.25rem 1fr;
  gap: var(--space-2);
  align-items: start;

  color: var(--text-muted);
  font-size: 0.95rem;
  line-height: 1.5;
}

.hl-assumption strong {
  color: var(--text-main);
  font-weight: 700;
}

/* Icon sits "behind" the text subtly */
.hl-assumption__icon {
  margin-top: 0.15rem;
  font-size: 1rem;

  color: var(--text-main);
  opacity: 0.22;              /* key: behind-feel */
  filter: grayscale(100%);    /* keep it monochrome-ish */
}

/* Optional: add a faint row divider without getting wireframe-y */
.hl-assumption + .hl-assumption {
  padding-top: var(--space-2);
  border-top: 1px solid var(--border-soft);
}



    </style>
  </head>

<body>
<!-- =========================
     2) SECTION WRAPPER + GRID
     Goal: consistent vertical rhythm + optional 2-col desktop layout
     ========================= -->

<site-page>
  <site-hero></site-hero>

  <!-- Wrap each module in a consistent section wrapper -->
  <section class="hl-section" id="ip">
    <div class="hl-container">
      <div class="hl-grid">
        <!-- Left: story -->
        <div class="hl-story">
          <patent-credentials
            kicker="Patents"
            title="Patent filings behind co-timing"
            lede="Our core mechanisms are covered by patent filings—so teams can deploy with clearer boundaries and fewer surprises."
            href="/ip"
            link-text="Learn about our IP"
            status="Patent pending"
            filings="Applications filed"
            scope="Co-timing + cancellation + diagnostics"
          >
            <a slot="cta" class="button button--primary" href="/ip">IP Overview</a>
            <span slot="note">Patent coverage varies by jurisdiction and embodiment. Details available on request.</span>
          </patent-credentials>
        </div>

        <!-- Right: proof (metrics/cards) -->
        <aside class="hl-proof">
          <!-- Optional: put summary cards, chips, or a small visual here
               If your component already renders the metrics, you can omit this. -->
        </aside>
      </div>
    </div>
  </section>

<section class="hl-section" id="market">
  <div class="hl-container">
    <div class="hl-grid hl-grid--single">
      <div class="hl-story">

        <!-- Branded header stack (optional but recommended) -->
        <div class="hl-header">
          <div class="hl-kicker">Market Research</div>
          <h2 class="hl-title">Cannabis Microclimate Sensing — Market Wedge</h2>
          <p class="hl-lede">
            We’re entering cannabis through a cost-and-compliance wedge: dense microclimate sensing that turns energy, quality, and audit pressure into measurable stability.
          </p>
        </div>

        <!-- STATUS CHIPS -->
        <div class="hl-chips" aria-label="Status">
          <span class="hl-chip">Published</span>
          <span class="hl-chip">Horizon: 2025–2035</span>
        </div>

        <!-- METRIC CARDS -->
        <div class="hl-metrics" aria-label="Market sizing">
          <div class="hl-metric">
            <div class="hl-metric__label">TAM (2030)</div>
            <div class="hl-metric__value">$2.84B</div>
          </div>
          <div class="hl-metric">
            <div class="hl-metric__label">TAM (2035)</div>
            <div class="hl-metric__value">$5.01B</div>
          </div>
          <div class="hl-metric">
            <div class="hl-metric__label">NA SAM (2030)</div>
            <div class="hl-metric__value">$0.85B</div>
          </div>
          <div class="hl-metric">
            <div class="hl-metric__label">NA SAM (2035)</div>
            <div class="hl-metric__value">$1.50B</div>
          </div>
          <div class="hl-metric">
            <div class="hl-metric__label">SOM target (2030)</div>
            <div class="hl-metric__value">$8.5M</div>
          </div>
          <div class="hl-metric">
            <div class="hl-metric__label">SOM target (2035)</div>
            <div class="hl-metric__value">$45M</div>
          </div>
        </div>

<!-- 8) Tiny D3 signature visual (timeline strip) -->
<!-- Drop this right under your chips (or under the lede) in the Market section -->
<div class="hl-wedge">
  <div class="hl-wedge__label">Market wedge (2025 → 2035)</div>
  <div id="market-wedge" class="hl-wedge__viz" aria-label="Market wedge timeline"></div>
</div>


<!-- Replace your current assumptions block with this -->
<div class="hl-footnote" role="note" aria-label="Assumptions">
  <div class="hl-footnote__label">Assumptions</div>

  <ul class="hl-assumptions">
    <li class="hl-assumption">
      <i class="fa-solid fa-layer-group hl-assumption__icon" aria-hidden="true"></i>
      <span><strong>Environmental slice:</strong> 12% of cannabis-tech spend.</span>
    </li>
    <li class="hl-assumption">
      <i class="fa-solid fa-globe hl-assumption__icon" aria-hidden="true"></i>
      <span><strong>Region split:</strong> North America = 30% of global.</span>
    </li>
    <li class="hl-assumption">
      <i class="fa-solid fa-bullseye hl-assumption__icon" aria-hidden="true"></i>
      <span><strong>Adoption targets:</strong> SOM = 1% by 2030, 3% by 2035.</span>
    </li>
  </ul>
</div>

<div class="hl-cta-row">
  <a class="button button--primary" href="/engage/invest/research/cannabis/">
    Read the deep dive
  </a>
  <a class="button button--secondary" href="/engage/invest/research/#request">
    Request additions
  </a>
</div>


      </div>
    </div>
  </div>
</section>

  <section class="hl-section" id="event">
    <div class="hl-container">
      <div class="hl-grid hl-grid--single">
        <!-- If event-invite is simple, you can keep it single-column -->
        <div class="hl-story">
          <event-invite></event-invite>
        </div>
      </div>
    </div>
  </section>
</site-page>

</body>
</html>


<script>
/* =========================
   D3: responsive colored "waffle-as-bars" (rectangles expand to fill width)
   - 3 rows: TAM / NA SAM / SOM
   - 10 segments per row
   - ALWAYS shows value text (on wide screens: right side; on small screens: below the bar)
   - Uses CSS vars: --tam-color, --sam-color, --som-color
   - Re-renders on resize using ResizeObserver.
   ========================= */
(function () {
  if (!window.d3) return;

  const mount = document.getElementById("market-wedge");
  if (!mount) return;

  // --- Helper: parse money strings like "$2.84B", "$8.5M" ---
  function parseMoney(s) {
    if (!s) return NaN;
    const str = String(s).trim().replace(/[\$,]/g, "").toUpperCase();
    const m = str.match(/^([0-9]*\.?[0-9]+)\s*([KMBT])?$/);
    if (!m) return NaN;
    const n = parseFloat(m[1]);
    const unit = m[2] || "";
    const mult =
      unit === "K" ? 1e3 :
      unit === "M" ? 1e6 :
      unit === "B" ? 1e9 :
      unit === "T" ? 1e12 : 1;
    return n * mult;
  }

  // --- Data (edit values as needed) ---
  const raw = [
    { key: "TAM", label: "TAM",    v2030: "$2.84B", v2035: "$5.01B" },
    { key: "SAM", label: "NA SAM", v2030: "$0.85B", v2035: "$1.50B" },
    { key: "SOM", label: "SOM",    v2030: "$8.5M",  v2035: "$45M"   }
  ].map(d => ({ ...d, n2030: parseMoney(d.v2030), n2035: parseMoney(d.v2035) }));

  if (raw.some(d => !isFinite(d.n2030) || !isFinite(d.n2035) || d.n2030 <= 0)) return;

  // --- Color mapping (CSS vars) ---
  const colorFor = (key) => ({
    TAM: "var(--tam-color, #2563EB)",
    SAM: "var(--sam-color, #10B981)",
    SOM: "var(--som-color, #F59E0B)"
  }[key] || "currentColor");

  // --- Tooltip (reuses your .hl-tip styles) ---
  let tip = document.querySelector(".hl-tip");
  if (!tip) {
    tip = document.createElement("div");
    tip.className = "hl-tip";
    tip.style.display = "none";
    document.body.appendChild(tip);
  }

  function showTip(evt, title, bodyHtml) {
    tip.innerHTML = `
      <div class="hl-tip__k">${title}</div>
      <div>${bodyHtml}</div>
    `;
    tip.style.display = "block";
    moveTip(evt);
  }

  function moveTip(evt) {
    const pad = 12;
    tip.style.left = `${evt.clientX + pad}px`;
    tip.style.top = `${evt.clientY + pad}px`;
  }

  function hideTip() {
    tip.style.display = "none";
  }

  window.addEventListener("scroll", hideTip, { passive: true });

  // --- Compute filled segments based on normalized growth across rows ---
  function computeRows() {
    const ratios = raw.map(d => d.n2035 / d.n2030);
    const rMin = Math.min(...ratios);
    const rMax = Math.max(...ratios);

    const toFilled = (r) => {
      const denom = Math.max(1e-9, (rMax - rMin));
      const t = (r - rMin) / denom;         // 0..1
      const seg = Math.round(1 + t * 9);    // 1..10
      return Math.max(1, Math.min(10, seg));
    };

    return raw.map(d => {
      const ratio = d.n2035 / d.n2030;
      return { ...d, ratio, filled: toFilled(ratio) };
    });
  }

  function render() {
    const rows = computeRows();

    const W = Math.max(280, Math.floor(mount.getBoundingClientRect().width || 0));
    mount.innerHTML = "";

    // Layout
    const segments = 10;       // 10 blocks
    const padX = 12;
    const topPad = 10;
    const bottomPad = 14;

    const leftLabelW = 62;     // label gutter
    const rightLabelW = 160;   // value gutter (only used on wider screens)

    // Always show values:
    // - wide screens: right side
    // - small screens: below the bar (so it never disappears)
    const showRight = W >= 520;
    const showBelow = !showRight;

    const rightGutter = showRight ? rightLabelW : 12;

    // Bar geometry
    const barX = padX + leftLabelW;
    const barW = Math.max(140, W - barX - rightGutter - padX);

    // Segment sizing
    const gap = Math.max(2, Math.min(8, Math.round(barW * 0.01))); // ~1% of width
    const segW = (barW - (segments - 1) * gap) / segments;
    const segH = Math.max(12, Math.min(18, Math.round(segW * 0.7)));

    // Row spacing
    const valueLineH = showBelow ? 14 : 0;               // extra line under bar on small screens
    const rowGap = Math.max(8, Math.round(segH * 0.6));  // gap to next row
    const rowH = segH + valueLineH + rowGap;

    const H = topPad + rows.length * rowH + bottomPad;

    const svg = d3.select(mount)
      .append("svg")
      .attr("width", "100%")
      .attr("height", H)
      .attr("viewBox", `0 0 ${W} ${H}`)
      .attr("preserveAspectRatio", "xMinYMin meet")
      .attr("role", "img");

    rows.forEach((r, i) => {
      const y = topPad + i * rowH;
      const rowColor = colorFor(r.key);

      // Left label
      svg.append("text")
        .attr("x", barX - 10)
        .attr("y", y + segH - 2)
        .attr("text-anchor", "end")
        .attr("font-size", 11)
        .attr("opacity", 0.86)
        .text(r.label);

      // Values: right side on wide screens
      if (showRight) {
        svg.append("text")
          .attr("x", W - padX)
          .attr("y", y + segH - 2)
          .attr("text-anchor", "end")
          .attr("font-size", 11)
          .attr("opacity", 0.7)
          .text(`${r.v2030} → ${r.v2035}`);
      }

      // Values: below bar on small screens (ALWAYS shown when narrow)
      if (showBelow) {
        // place under the bar, left-aligned at barX
        svg.append("text")
          .attr("x", barX)
          .attr("y", y + segH + 12) // below the bar
          .attr("text-anchor", "start")
          .attr("font-size", 10)
          .attr("opacity", 0.7)
          .text(`${r.v2030} → ${r.v2035}`);
      }

      // Segment group
      const g = svg.append("g").attr("transform", `translate(${barX}, ${y})`);

      // Background segments
      for (let s = 0; s < segments; s++) {
        g.append("rect")
          .attr("x", s * (segW + gap))
          .attr("y", 0)
          .attr("width", segW)
          .attr("height", segH)
          .attr("rx", Math.min(6, segH / 2))
          .attr("ry", Math.min(6, segH / 2))
          .attr("fill", rowColor)
          .attr("opacity", 0.08)
          .attr("stroke", rowColor)
          .attr("stroke-opacity", 0.16)
          .attr("stroke-width", 0.7);
      }

      // Filled segments
      for (let s = 0; s < r.filled; s++) {
        g.append("rect")
          .attr("x", s * (segW + gap))
          .attr("y", 0)
          .attr("width", segW)
          .attr("height", segH)
          .attr("rx", Math.min(6, segH / 2))
          .attr("ry", Math.min(6, segH / 2))
          .attr("fill", rowColor)
          .attr("opacity", 0.28)
          .attr("stroke", rowColor)
          .attr("stroke-opacity", 0.22)
          .attr("stroke-width", 0.7);
      }

      // Hover target for the whole row (covers label + bar + below-text if present)
      const hoverH = segH + (showBelow ? valueLineH : 0) + 8;

      svg.append("rect")
        .attr("x", 0)
        .attr("y", y - 3)
        .attr("width", W)
        .attr("height", hoverH)
        .attr("fill", "transparent")
        .style("cursor", "default")
        .on("mouseenter", function (evt) {
          const pct = (r.ratio - 1) * 100;
          const body = `
            2030: <strong>${r.v2030}</strong><br/>
            2035: <strong>${r.v2035}</strong><br/>
            Growth: <strong>${pct.toFixed(0)}%</strong>
            <div class="hl-tip__muted" style="margin-top:.35rem">
              Segments indicate relative growth (normalized across TAM/SAM/SOM).
            </div>
          `;
          showTip(evt, r.label, body);
        })
        .on("mousemove", function (evt) { moveTip(evt); })
        .on("mouseleave", hideTip);
    });

    // Footer note (only when there's room)
    if (W >= 520) {
      svg.append("text")
        .attr("x", padX + leftLabelW)
        .attr("y", H - 4)
        .attr("font-size", 10)
        .attr("opacity", 0.55)
        .text("Segments fill the full width; filled portion indicates relative growth (2035 vs 2030).");
    }
  }

  // ResizeObserver: rerender when container changes size
  let raf = 0;
  const ro = new ResizeObserver(() => {
    cancelAnimationFrame(raf);
    raf = requestAnimationFrame(render);
  });
  ro.observe(mount);

  render();
})();
</script>